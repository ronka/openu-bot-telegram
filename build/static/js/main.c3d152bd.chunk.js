(this["webpackJsonpopenu-bot-dashboard"]=this["webpackJsonpopenu-bot-dashboard"]||[]).push([[0],{101:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),c=(a(101),a(59)),i=a(22),s=a(75),u=a(76),m=a(86),d=a(77),p=a(39),b=a(85),f=a(5),h=a(170),g=a(169),E=a(171),v=a(81),y=a.n(v),k=a(35),O=a.n(k),w=(a(112),k.initializeApp({apiKey:"AIzaSyBmHzDoGXvkDtbOTMHm5kNI0xMZZbRwCec",authDomain:"openu-groups-bot.firebaseapp.com",databaseURL:"https://openu-groups-bot.firebaseio.com",projectId:"openu-groups-bot"})),j=a(79),x=a(172),C=Object(j.a)((function(e){return{textField:{width:"100%"}}}));function L(e){var t=C(),a=e.callback;return r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(x.a,{id:"course-number-input",label:"Course Number",className:t.textField,onChange:function(e){a(e.target.value)},margin:"normal",variant:"filled",inputProps:{maxLength:5}}))}var I=a(84),S=a(165),P=a(166),N=a(159),D=a(38),W=a(164),_=a(163),A=a(162),F=a(173),T=a(60),U=a(160),z=a(161),R=a(176),V=a(158),B=a(175);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=Object(j.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},root:{display:"flex"}}})),J=w.firestore();function Z(e){var t=H(),a=e.data,n=r.a.useState({semester:"",courseId:"",year:"",url:""}),l=Object(D.a)(n,2),o=l[0],c=l[1],i=function(e){return function(t){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(T.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(T.a)({},e,t.target.value)))}};return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(e){var t=o.courseId,a=o.year,n=o.url,r=o.semester,l={};l["".concat(t,".").concat(a,".").concat(r)]=O.a.firestore.FieldValue.arrayUnion({url:n}),5==t.length?4==a.length?["a","b","c"].includes(r)?n?J.collection("link_list").doc("courses").update(l).then((function(e){console.log({success:!0}),window.location.reload()})).catch((function(e){alert("error"),console.log({success:!1,error:e})})):alert("invalid url"):alert("invalid semester"):alert("invalid year"):alert("invalid course id")}()}},r.a.createElement(x.a,{id:"add_course_courseId",name:"courseId",onChange:i("courseId"),label:"Course Number",value:o.courseId,style:{margin:"8px 0"},fullWidth:!0,margin:"normal",type:"number",InputLabelProps:{shrink:!0},inputProps:{maxLength:5}}),r.a.createElement(x.a,{id:"add_course_year",name:"year",onChange:i("year"),label:"Year",style:{margin:"8px 0"},fullWidth:!0,value:o.year,margin:"normal",type:"number",InputLabelProps:{shrink:!0},inputProps:{maxLength:4}}),r.a.createElement(R.a,{component:"fieldset",style:{margin:"8px 0"}},r.a.createElement(V.a,{component:"legend"},"Semester"),r.a.createElement(U.a,{row:!0,style:{textAlign:"center"}},r.a.createElement(z.a,{control:r.a.createElement(B.a,{checked:"c"===o.semester,onChange:i("semester"),value:"c"}),label:"\u05d2"}),r.a.createElement(z.a,{control:r.a.createElement(B.a,{checked:"b"===o.semester,onChange:i("semester"),value:"b"}),label:"\u05d1"}),r.a.createElement(z.a,{control:r.a.createElement(B.a,{checked:"a"===o.semester,onChange:i("semester"),value:"a"}),label:"\u05d0"}))),r.a.createElement(x.a,{id:"add_course_url",name:"url",onChange:i("url"),label:"url",style:{margin:"8px 0"},fullWidth:!0,value:o.url,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(A.a,{fullWidth:!0,variant:"contained",style:{marginTop:"8px"},color:"primary",type:"submit"},"SAVE"),!!a&&r.a.createElement(A.a,{fullWidth:!0,variant:"contained",style:{marginTop:"8px"},color:"secondary"},"DELETE"))}var G=Object(j.a)((function(e){return{paper:{position:"absolute",width:"70%",minWidth:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}));function K(e){var t=G(),a=e.open,n=e.callback,l=e.data;return r.a.createElement(F.a,{"aria-labelledby":"edit-modal-title","aria-describedby":"edit-modal-description",open:a,onClose:function(){n(!1)}},r.a.createElement("div",{className:t.paper},r.a.createElement("h2",{id:"edit-modal-title"},"Edit Link"),r.a.createElement(Z,{data:l})))}var X=Object(j.a)((function(e){return{url:{textTransform:"initial"},button:{marginTop:0,marginBottom:0,marginLeft:e.spacing(1),marginRight:e.spacing(1)}}})),Y=w.firestore();function $(e){var t=X(),a=r.a.useState(!1),n=Object(D.a)(a,2),l=n[0],o=n[1],c=e.data,i=e.courseId;return c?(c.courseId=i,r.a.createElement(_.a,null,r.a.createElement(W.a,{component:"th",scope:"row"},c.year),r.a.createElement(W.a,null,c.semester),r.a.createElement(W.a,null,r.a.createElement(A.a,{target:"_blank",href:c.url,className:t.url},c.url)),r.a.createElement(W.a,{align:"right"},r.a.createElement(A.a,{target:"_blank",href:"https://www.openu.ac.il/courses/".concat(i,".htm"),color:"primary",size:"small",className:t.button},"Course Site"),r.a.createElement(A.a,{color:"secondary",size:"small",className:t.button,onClick:function(){!function(e){var t={};t["".concat(e.courseId,".").concat(e.year,".").concat(e.semester)]=O.a.firestore.FieldValue.arrayRemove({url:e.url}),Y.collection("link_list").doc("courses").update(t).then((function(e){console.log({success:!0}),window.location.reload()})).catch((function(e){alert("error"),console.log({success:!1,error:e})}))}(c)}},"Delete")),r.a.createElement(K,{callback:o,open:l,data:c}))):"loading ..."}var q=Object(j.a)({root:{width:"100%"},table:{width:"100%"}});function Q(e){var t=q(),a=e.data,n=e.courseId;if(!a||a===[])return"loading ...";var l=[],o=0,c=function(e){var t=function(t){l.push.apply(l,Object(I.a)(a[e][t].map((function(a){return{year:e,semester:t,url:a.url,index:o}})))),o++};for(var n in a[e])t(n)};for(var i in a)c(i);return r.a.createElement(N.a,{className:t.root},r.a.createElement(S.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(P.a,null,l.map((function(e){return r.a.createElement($,{data:e,courseId:n})})))))}var ee=a(174),te=a(167),ae=a(168),ne=a(120),re=a(80),le=a.n(re);function oe(e){var t=e.data;if(!t)return"loading ...";var a=[];for(var n in t)a.push(r.a.createElement(ee.a,null,r.a.createElement(te.a,{expandIcon:r.a.createElement(le.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(ne.a,null,n)),r.a.createElement(ae.a,null,r.a.createElement(Q,{data:t[n],courseId:n}))));return a}var ce=Object(j.a)((function(e){return{paper:{position:"absolute",width:"70%",minWidth:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}));function ie(e){var t=ce(),a=e.open,n=e.callback;return r.a.createElement(F.a,{"aria-labelledby":"add-modal-title","aria-describedby":"add-modal-description",open:a,onClose:function(){n(!1)}},r.a.createElement("div",{className:t.paper},r.a.createElement("h2",{id:"add-modal-title"},"Add Link"),r.a.createElement(Z,null)))}var se=w.firestore().collection("link_list").doc("courses"),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={courses:[],filteredList:[],filter:"",modalState:!1},a.filterList=a.filterList.bind(Object(p.a)(a)),a.filterCallback=a.filterCallback.bind(Object(p.a)(a)),a.modalCallback=a.modalCallback.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;se.get().then((function(t){t.exists?e.setState({courses:t.data(),filteredList:t.data()}):alert("No such document!")})).catch((function(e){alert("Error getting document:",e)}))}},{key:"componentDidUpdate",value:function(e,t){this.state.filter!==t.filter&&this.filterList()}},{key:"filterList",value:function(){var e=this.state.courses,t=this.state.filter;if(""!==t){var a=Object.keys(e).filter((function(e){return e.includes(t)})).reduce((function(t,a){return t[a]=e[a],t}),{});this.setState({filteredList:a})}}},{key:"filterCallback",value:function(e){this.setState({filter:e})}},{key:"modalCallback",value:function(e){this.setState({modalState:e})}},{key:"render",value:function(){var e=this.state,t=e.filteredList,a=e.modalState,n=this.props.classes,l=this.filterCallback,o=this.modalCallback;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null),r.a.createElement(h.a,null,r.a.createElement(L,{callback:l}),r.a.createElement(oe,{data:t}),r.a.createElement(E.a,{color:"primary","aria-label":"add",className:n.fab,onClick:function(){o(!0)}},r.a.createElement(y.a,null)),r.a.createElement(ie,{callback:o,open:a})))}}]),t}(n.Component),me=Object(f.a)((function(e){return{button:{margin:"".concat(e.spacing(1),"px auto ").concat(e.spacing(2),"px"),width:"50%",display:"block"},fab:{position:"fixed",right:e.spacing(2),bottom:e.spacing(2)}}}))(ue),de=a(61),pe=a.n(de),be=a(82),fe=r.a.createContext(),he=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(D.a)(a,2),o=l[0],c=l[1];return Object(n.useEffect)((function(){w.auth().onAuthStateChanged(c)}),[]),r.a.createElement(fe.Provider,{value:{currentUser:o}},t)},ge=Object(i.f)((function(e){var t=e.history,a=Object(n.useCallback)(function(){var e=Object(be.a)(pe.a.mark((function e(a){var n,r,l;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,l=n.password,e.prev=2,e.next=5,w.auth().signInWithEmailAndPassword(r.value,l.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useContext)(fe).currentUser?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Log in"),r.a.createElement("form",{onSubmit:a},r.a.createElement("label",null,"Email",r.a.createElement("input",{name:"email",type:"email",placeholder:"Email"})),r.a.createElement("label",null,"Password",r.a.createElement("input",{name:"password",type:"password",placeholder:"Password"})),r.a.createElement("button",{type:"submit"},"Log in")))})),Ee=a(87),ve=function(e){var t=e.component,a=Object(Ee.a)(e,["component"]),l=Object(n.useContext)(fe).currentUser;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))},ye=function(){return r.a.createElement(he,null,r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(ve,{exact:!0,path:"/",component:me}),r.a.createElement(i.b,{exact:!0,path:"/login",component:ge}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,a){e.exports=a(119)}},[[96,1,2]]]);
//# sourceMappingURL=main.c3d152bd.chunk.js.map